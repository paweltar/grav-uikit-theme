{% set data = flex_entries.getData().toArray() | sort_by_key('item') %}
<div id="flex-directory">

    <nav class="uk-navbar-container uk-margin-large-bottom" uk-navbar>
        <div class="uk-navbar-left">
            <div class="uk-navbar-item">
                <form class="uk-search uk-search-large">
                    <span uk-search-icon></span>
                    <input class="uk-search-input form-input search" type="text" placeholder="Szukaj"/>
                </form>
            </div>
        </div>
    </nav>

    <div class="list">
        {% for entry in data|sort if entry.published %}
        {% set card_header_image = first_image.smooth(10).quality(70).contrast(50) %}
            <div class="uk-card uk-card-default uk-margin uk-overflow-hidden uk-border-rounded" uk-scrollspy="cls: uk-animation-fade; repeat: true">
                <div style="background-image: linear-gradient(
      rgba(255, 255, 255, 0.5),
      rgba(255, 255, 255, 0.7)
    ), url({{ card_header_image.url }})" class="uk-background-cover uk-card-header uk-dark">
                    <div class="uk-grid-small uk-flex-middle" uk-grid>
                        <div class="uk-width-expand">
                            <h2 class="uk-card-title uk-margin-remove-bottom item uk-text-bold uk-text-uppercase">{{ entry.item }}</h2>
                            <p class="uk-text-meta uk-margin-remove-top tags">
                                {% for tag in entry.tags %}
                                    <span class="uk-label">{{ tag }}</span>
                                {% endfor %}
                            </p>
                        </div>
                    </div>
                </div>
                <div class="uk-card-body">
                    {% if entry.item_definition %}
                        <p>{{ entry.item_definition }}</p>
                    {% endif %}
                </div>
                <div class="uk-card-footer">
                    {% for link in entry.external %}
                        <a href="{{ link.url }}" class="uk-link-muted uk-margin-right" uk-icon="icon: link" target="_blank">
                            <span class="link_text">{{ link.text }}</span>
                        </a>
                    {% endfor %}
                </div>
            </div>

        {% endfor %}
    </div>
</div>

<script>
    var options = {
        valueNames: ['item', 'link_text', 'tags']
    };
    var flexList = new List('flex-directory', options);
</script>
